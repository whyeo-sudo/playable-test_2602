<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ìã∞Îπô ÏΩòÌÖêÏ∏† ÏõîÎìúÏªµ</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Noto+Sans+KR:wght@400;700;900&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --neon-red: #FF153C;
            --neon-cyan: #00FFFF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: #000;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            font-family: 'Noto Sans KR', sans-serif;
        }

        /* Video Background */
        .bg-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
        }

        /* Darkening overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 20%, rgba(0, 0, 0, 0.6) 80%);
            pointer-events: none;
            z-index: 1;
        }

        /* Header */
        .header {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 30;
        }

        .round-badge {
            font-family: 'Noto Sans KR', sans-serif;
            color: #fff;
            font-size: 2.2rem;
            font-weight: 900;
            letter-spacing: 1px;
            text-shadow: 0 0 25px var(--neon-red), 2px 2px 8px rgba(0, 0, 0, 0.8);
            display: inline-block;
            white-space: nowrap;
        }

        @media (max-width: 500px) {
            .round-badge {
                font-size: 1.6rem;
                letter-spacing: 0.5px;
            }
        }

        .tving-logo {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 120px;
            height: auto;
            z-index: 100;
            filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.5));
        }

        @media (max-width: 500px) {
            .tving-logo {
                width: 80px;
                top: 15px;
                right: 15px;
            }
        }

        /* Arena Container */
        .arena {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: -8%;
            /* Move cards upward */
            z-index: 10;
        }

        /* Card positioning - Side by side on ALL orientations */
        .card {
            position: relative;
            width: 28%;
            /* Narrower for side-by-side */
            max-width: 200px;
            aspect-ratio: 2/3;
            /* Tall rectangular */
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        /* Left card */
        #card-a {
            margin-right: 8%;
            z-index: 20;
            animation: float-left 3.5s ease-in-out infinite;
        }

        /* Right card */
        #card-b {
            margin-left: 8%;
            z-index: 20;
            animation: float-right 3.5s ease-in-out infinite;
        }

        /* Floating animations */
        @keyframes float-left {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            50% {
                transform: translateY(-15px) translateX(-3px);
            }
        }

        @keyframes float-right {

            0%,
            100% {
                transform: translateY(0) translateX(0);
            }

            50% {
                transform: translateY(-15px) translateX(3px);
            }
        }

        /* Card visual */
        .card-inner {
            width: 100%;
            height: 100%;
            border-radius: 12px;
            overflow: hidden;
            background: #000;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
            position: relative;
        }

        #card-a .card-inner {
            border-color: var(--neon-red);
            box-shadow: 0 0 30px rgba(255, 21, 60, 0.5);
        }

        #card-b .card-inner {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
        }

        .card-inner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Reflection */
        .reflection {
            position: absolute;
            top: 102%;
            left: 0;
            width: 100%;
            height: 50%;
            transform: scaleY(-1);
            opacity: 0.2;
            pointer-events: none;
            mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 1), rgba(0, 0, 0, 0));
        }

        /* Card Title */
        .card-title {
            position: absolute;
            top: 105%;
            left: 0;
            width: 100%;
            text-align: center;
            color: #fff;
            font-size: 0.9rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            pointer-events: none;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding: 0 5px;
        }

        @media (min-width: 768px) {
            .card-title {
                font-size: 1.1rem;
            }
        }

        .reflection img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }

        /* VS Badge - Between the two cards */
        .vs-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 50;
            pointer-events: none;
        }

        .vs-text {
            font-family: 'Black Ops One', cursive;
            font-size: 4rem;
            color: #fff;
            text-shadow:
                3px 3px 0 var(--neon-red),
                -3px -3px 0 var(--neon-cyan);
            animation: pulse-vs 1.2s ease-in-out infinite alternate;
        }

        @media (min-width: 768px) {
            .vs-text {
                font-size: 5rem;
            }

            .card {
                width: 22%;
                max-width: 250px;
            }
        }

        @keyframes pulse-vs {
            from {
                transform: scale(1);
                opacity: 0.85;
            }

            to {
                transform: scale(1.08);
                opacity: 1;
            }
        }

        /* VS hidden during selection */
        .vs-container.hidden {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        /* Screen shake for final match */
        @keyframes screen-shake {

            0%,
            100% {
                transform: translate(0, 0);
            }

            10% {
                transform: translate(-10px, -10px);
            }

            20% {
                transform: translate(10px, 10px);
            }

            30% {
                transform: translate(-10px, 10px);
            }

            40% {
                transform: translate(10px, -10px);
            }

            50% {
                transform: translate(-10px, -10px);
            }

            60% {
                transform: translate(10px, 10px);
            }

            70% {
                transform: translate(-10px, 10px);
            }

            80% {
                transform: translate(10px, -10px);
            }

            90% {
                transform: translate(-10px, 10px);
            }
        }

        body.shake {
            animation: screen-shake 0.5s ease-in-out;
        }

        /* Interaction states */
        .card:active {
            transform: scale(0.95) !important;
            animation: none !important;
        }

        .card.winner {
            z-index: 200 !important;
            position: fixed !important;
            top: 50% !important;
            left: 50% !important;
            margin: 0 !important;
            transform: translate(-50%, -50%) scale(1.4) !important;
            animation: none !important;
            max-width: none;
            width: 50%;
        }

        .card.winner .card-inner {
            border-width: 4px;
            border-color: #fff;
            box-shadow: 0 0 80px var(--neon-red);
        }

        .card.loser {
            opacity: 0;
            transform: scale(0.6) translateY(100px) !important;
            filter: grayscale(100%) brightness(0.3);
            pointer-events: none;
        }

        /* Winner Screen - Redesigned */
        #winner-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            z-index: 300;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .winner-title {
            display: none;
            /* Hidden - focus on curation */
            font-family: 'Black Ops One', cursive;
            font-size: 3rem;
            color: #fff;
            text-shadow: 0 0 40px var(--neon-red), 0 0 80px var(--neon-red);
            margin-bottom: 20px;
            letter-spacing: 4px;
        }

        .winner-card {
            display: none;
            /* Hidden - focus on curation */
            width: 45%;
            max-width: 280px;
            aspect-ratio: 2/3;
            border: 5px solid var(--neon-red);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 0 100px var(--neon-red), 0 0 200px rgba(255, 21, 60, 0.5);
            margin-bottom: 20px;
            animation: winner-float 3s ease-in-out infinite;
        }

        @keyframes winner-float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        .winner-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .winner-name {
            display: none;
            /* Hidden - focus on curation */
            font-size: 2rem;
            color: #fff;
            font-weight: 900;
            margin-bottom: 15px;
            text-shadow: 2px 2px 8px #000;
        }

        /* Winner Taste Header */
        .winner-taste-header {
            font-size: 1.8rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 25px;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9);
            letter-spacing: 1px;
        }

        @media (max-width: 500px) {
            .winner-taste-header {
                font-size: 1.4rem;
                margin-bottom: 20px;
            }
        }

        @keyframes curation-glow {
            from {
                text-shadow: 0 0 15px var(--neon-red), 2px 2px 4px rgba(0, 0, 0, 0.8);
            }

            to {
                text-shadow: 0 0 25px var(--neon-red), 0 0 35px rgba(255, 21, 60, 0.5), 2px 2px 4px rgba(0, 0, 0, 0.8);
            }
        }

        /* Recommendation Section */
        .recommendation-section {
            width: 90%;
            max-width: 500px;
            margin-bottom: 25px;
        }

        .recommendation-title {
            font-size: 1.1rem;
            color: #fff;
            margin-bottom: 15px;
            text-align: center;
            font-weight: 700;
        }

        .recommendation-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        @media (min-width: 500px) {
            .recommendation-grid {
                grid-template-columns: repeat(6, 1fr);
            }
        }

        .recommend-card {
            cursor: pointer;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            aspect-ratio: 2/3;
        }

        .recommend-card:hover {
            transform: translateY(-5px);
            border-color: var(--neon-red);
            box-shadow: 0 0 20px rgba(255, 21, 60, 0.6);
        }

        .recommend-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .winner-cta {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            padding: 14px 24px;
            background: linear-gradient(135deg, #000, #1a1a1a);
            color: #fff;
            font-size: 1rem;
            font-weight: 700;
            border: 2px solid var(--neon-red);
            border-radius: 50px;
            box-shadow: 0 6px 30px rgba(255, 21, 60, 0.4);
            cursor: pointer;
            transition: all 0.3s;
            text-transform: none;
            font-family: 'Noto Sans KR', sans-serif;
            white-space: nowrap;
        }

        .winner-cta img {
            width: 45px;
            height: auto;
            vertical-align: middle;
            flex-shrink: 0;
            margin: 0 2px;
        }

        .winner-cta:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 40px rgba(255, 21, 60, 0.6);
        }

        @media (max-width: 500px) {
            .winner-cta {
                font-size: 0.95rem;
                padding: 12px 20px;
                gap: 2px;
            }

            .winner-cta img {
                width: 40px;
            }
        }

        .cta-btn:active {
            transform: scale(0.95);
        }

        /* Canvas for confetti */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 250;
            pointer-events: none;
        }

        /* Opening Screen */
        #opening-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            background: #000;
            overflow: hidden;
            cursor: pointer;
            /* Indicate clickable */
        }

        .opening-bg-video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translate(-50%, -50%);
            z-index: -1;
            object-fit: cover;
            filter: brightness(0.4);
            /* Darker filter */
        }

        .opening-content {
            position: relative;
            z-index: 10;
            text-align: center;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* removed translateY(-40px) to center content */
        }

        .opening-title-img {
            max-width: 90%;
            height: auto;
            display: block;
            margin: 0 auto 0 auto;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.8));
            animation: title-pulse-img 3s ease-in-out infinite;
        }

        @keyframes title-pulse-img {

            0%,
            100% {
                transform: scale(1);
                filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.8));
            }

            50% {
                transform: scale(1.05);
                filter: drop_shadow(0 0 40px rgba(255, 255, 255, 0.9));
            }
        }

        .opening-subtitle {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 1.3rem;
            font-weight: 500;
            color: #fff;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9);
            letter-spacing: 2px;
            margin-bottom: 50px;
            opacity: 0.95;
            margin-top: -70px;
            position: relative;
            z-index: 20;
        }

        .opening-instructions {
            background: rgba(0, 0, 0, 0.6);
            padding: 20px 30px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: left;
            margin-top: -20px;
            backdrop-filter: blur(5px);
            max-width: 90%;
            width: 320px;
        }

        .opening-instructions h3 {
            color: #FFD700;
            font-size: 1.2rem;
            margin-bottom: 15px;
            text-align: center;
            font-weight: 800;
            letter-spacing: 1px;
        }

        .opening-instructions p {
            color: #ccc;
            font-size: 0.95rem;
            margin: 8px 0;
            line-height: 1.4;
            letter-spacing: 0.5px;
        }

        .opening-instructions .highlight {
            color: #fff;
            font-weight: 700;
            margin-top: 12px;
            border-top: 1px dashed rgba(255, 255, 255, 0.3);
            padding-top: 10px;
        }

        .opening-cta-container {
            position: absolute;
            bottom: 50px;
            width: 100%;
            text-align: center;
            z-index: 20;
            pointer-events: none;
            /* Allow clicks to pass through to screen */
        }

        .opening-cta {
            pointer-events: auto;
            /* Re-enable for button visual */
            padding: 20px 60px;
            background: transparent;
            color: #fff;
            font-size: 1.8rem;
            /* Adjusted for Korean */
            font-weight: 900;
            border: none;
            cursor: pointer;
            font-family: 'Noto Sans KR', sans-serif;
            /* Back to Korean font */
            text-transform: none;
            letter-spacing: 2px;
            position: relative;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 2px 2px 0 #ff153c;
            animation: press-start-blink 1.2s step-end infinite;
            box-shadow: none;
        }

        .opening-cta::before {
            display: none;
        }

        @keyframes press-start-blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.3;
            }
        }

        .opening-cta:hover {
            transform: scale(1.1);
            background: transparent;
            box-shadow: none;
            color: #ff153c;
            text-shadow: 0 0 10px rgba(255, 21, 60, 0.8), 2px 2px 0 #fff;
            animation: none;
            opacity: 1;
        }

        @media (max-width: 500px) {
            .opening-title-img {
                margin: 0 auto 0 auto;
                max-width: 85%;
            }

            .opening-subtitle {
                font-size: 1rem;
                padding: 0 20px;
                letter-spacing: 1px;
                margin-bottom: 30px;
                margin-top: -60px;
            }

            .opening-instructions {
                width: 300px;
                padding: 15px 20px;
                margin-top: 10px;
            }

            .opening-instructions p {
                font-size: 0.85rem;
            }

            .opening-cta-container {
                bottom: 40px;
            }

            .opening-cta {
                font-size: 1.4rem;
                padding: 15px 40px;
            }
        }

        /* If Black Han Sans is not loaded, import it */
        @import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap');

        @keyframes cta-pulse {

            0%,
            100% {
                transform: scale(1);
                box-shadow:
                    0 0 20px rgba(255, 21, 60, 0.4),
                    inset 0 0 10px rgba(255, 21, 60, 0.1),
                    0 8px 25px rgba(0, 0, 0, 0.5);
            }

            50% {
                transform: scale(1.03);
                box-shadow:
                    0 0 40px rgba(255, 21, 60, 0.6),
                    inset 0 0 20px rgba(255, 21, 60, 0.2),
                    0 10px 35px rgba(0, 0, 0, 0.6);
            }
        }

        .opening-cta:hover {
            transform: scale(1.08);
            background: #ffe6e9;
            box-shadow:
                0 0 50px rgba(255, 21, 60, 0.8),
                inset 0 0 30px rgba(255, 21, 60, 0.2),
                0 12px 40px rgba(0, 0, 0, 0.8);
        }

        .opening-cta:hover::before {
            opacity: 1;
        }

        @media (max-width: 500px) {
            .opening-cta {
                font-size: 1.2rem;
                padding: 18px 50px;
                letter-spacing: 2px;
            }
        }

        /* 3D Battle Transition Text - Tekken Style */
        #battle-text {
            position: fixed;
            top: 50%;
            right: -150%;
            transform: translateY(-50%) perspective(1000px) rotateY(-15deg) scale(0.8);
            font-family: 'Black Ops One', cursive;
            font-size: 4rem;
            font-weight: 900;
            color: #FFD700;
            z-index: 600;
            white-space: normal;
            letter-spacing: 8px;
            opacity: 0;
            filter: blur(0px);
            text-align: center;
            line-height: 1.1;
            text-shadow:
                0 0 30px rgba(255, 215, 0, 1),
                0 0 50px rgba(255, 215, 0, 0.8),
                3px 3px 0 #000,
                -3px -3px 0 #000,
                3px -3px 0 #000,
                -3px 3px 0 #000,
                5px 5px 0 #000,
                -5px -5px 0 #000,
                5px -5px 0 #000,
                -5px 5px 0 #000,
                8px 8px 25px rgba(0, 0, 0, 0.9);
        }

        @media (max-width: 500px) {
            #battle-text {
                font-size: 1.8rem;
                letter-spacing: 2px;
                line-height: 0.95;
            }
        }

        /* Background overlay during battle text */
        .battle-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
            z-index: 550;
            opacity: 0;
            pointer-events: none;
        }

        .battle-overlay-active {
            animation: overlay-fade 2.5s ease-out forwards;
        }

        @keyframes overlay-fade {

            0%,
            100% {
                opacity: 0;
            }

            40%,
            60% {
                opacity: 1;
            }
        }

        @keyframes battle-fly {
            0% {
                right: -150%;
                opacity: 0;
                transform: translateY(-50%) perspective(1000px) rotateY(-15deg) scale(0.8);
                filter: blur(20px);
            }

            15% {
                opacity: 1;
                filter: blur(5px);
            }

            45% {
                right: 50%;
                transform: translateY(-50%) translateX(50%) perspective(1000px) rotateY(0deg) scale(1.3);
                filter: blur(0px);
            }

            55% {
                right: 50%;
                transform: translateY(-50%) translateX(50%) perspective(1000px) rotateY(0deg) scale(1.3);
                filter: blur(0px);
            }

            75% {
                opacity: 1;
                filter: blur(5px);
            }

            100% {
                right: 200%;
                opacity: 0;
                transform: translateY(-50%) perspective(1000px) rotateY(15deg) scale(0.8);
                filter: blur(20px);
            }
        }

        .battle-fly-animation {
            animation: battle-fly 2.5s cubic-bezier(0.16, 0.8, 0.3, 1) forwards;
        }


        /* Winner Screen */
        .winner-type {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 2rem;
            font-weight: 900;
            color: #FFD700;
            margin-bottom: 15px;
            text-shadow: 0 0 25px #FFD700, 2px 2px 8px rgba(0, 0, 0, 0.9);
            letter-spacing: 3px;
            padding: 12px 30px;
            border: 3px solid #FFD700;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.7);
            animation: type-glow 2s ease-in-out infinite alternate;
        }

        @keyframes type-glow {
            from {
                box-shadow: 0 0 15px #FFD700;
            }

            to {
                box-shadow: 0 0 30px #FFD700, 0 0 50px rgba(255, 215, 0, 0.5);
            }
        }

        @media (max-width: 500px) {
            .winner-type {
                font-size: 1.5rem;
                font-weight: 800;
                letter-spacing: 2px;
                padding: 10px 20px;
            }
        }
    </style>
</head>

<!-- Opening Screen -->
<div id="opening-screen" onclick="startGame()">
    <video autoplay muted loop playsinline class="opening-bg-video">
        <source src="background_opening.mp4" type="video/mp4">
    </video>
    <div class="opening-content">
        <img src="title.png" class="opening-title-img" alt="Ìã∞Îπô ÏΩòÌÖêÏ∏† ÏõîÎìúÏªµ">
        <div class="opening-subtitle">ÎãπÏã†Ïùò ÏµúÏï† ÏΩòÌÖêÏ∏†Î•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</div>

        <div class="opening-instructions">
            <h3>ÏßÑÌñâ Î∞©Î≤ï</h3>
            <p>1. Îëò Ï§ë ÎÅåÎ¶¨Îäî ÏΩòÌÖêÏ∏†Î•º Í≥®ÎùºÏ£ºÏÑ∏Ïöî</p>
            <p>2. 8Í∞ï ÌÜ†ÎÑàÎ®ºÌä∏Î°ú ÏßÑÌñâ!</p>
            <p>3. ÎßàÏßÄÎßâÏóê ÎãπÏã†Ïùò ÏµúÏï†Í∞Ä Í≤∞Ï†ïÎê©ÎãàÎã§</p>
            <p class="highlight">‚ú® ÎÅùÎÇòÎ©¥ Ï∑®Ìñ• Ï†ÄÍ≤© ÏΩòÌÖêÏ∏† Ï∂îÏ≤úÍπåÏßÄ!</p>
        </div>
    </div>
    <div class="opening-cta-container">
        <div class="opening-cta">ÌôîÎ©¥ÏùÑ ÌÑ∞ÏπòÌïòÏÑ∏Ïöî</div>
    </div>
</div>

<!-- 3D Battle Transition Text -->
<div class="battle-overlay" id="battle-overlay"></div>
<div id="battle-text">
    GET<br>
    READY<br>
    FOR<br>
    THE NEXT<br>
    BATTLE
</div>

<body>

    <!-- Video Background -->
    <video class="bg-video" autoplay loop muted playsinline>
        <source src="bg_arena_vid.mp4" type="video/mp4">
    </video>

    <div class="overlay"></div>
    <canvas id="lightning-canvas"></canvas>
    <canvas id="confetti-canvas"></canvas>

    <!-- TVING Logo (Top Right) -->
    <img src="tving_logo.svg" alt="TVING" class="tving-logo">

    <div class="header">
        <div class="round-badge" id="round-badge">ROUND 1</div>
    </div>

    <div class="arena">
        <!-- Card A (Left - Red) -->
        <div class="card" id="card-a" onclick="selectCard('a')">
            <div class="card-inner">
                <img src="" id="img-a">
            </div>
            <div class="reflection">
                <img src="" id="reflect-a">
            </div>
            <div class="card-title" id="title-a">Title A</div>
        </div>

        <!-- Card B (Right - Blue) -->
        <div class="card" id="card-b" onclick="selectCard('b')">
            <div class="card-inner">
                <img src="" id="img-b">
            </div>
            <div class="reflection">
                <img src="" id="reflect-b">
            </div>
            <div class="card-title" id="title-b">Title B</div>
        </div>
    </div>

    <!-- VS Badge (Absolute positioned in center) -->
    <div class="vs-container">
        <div class="vs-text">VS</div>
    </div>

    <!-- Winner Screen -->
    <div id="winner-screen">
        <div class="winner-taste-header">ÎãπÏã†Ïùò Ï∑®Ìñ•ÏùÄ?</div>

        <div class="winner-card">
            <img src="" id="winner-img">
        </div>
        <div class="winner-name" id="winner-name">Title</div>
        <div class="winner-type" id="winner-type">TYPE</div>

        <!-- Recommendation Section -->
        <div class="recommendation-section">
            <h3 class="recommendation-title">Ïù¥Îü∞ ÏûëÌíàÏùÄ Ïñ¥Îñ†ÏÑ∏Ïöî?</h3>
            <div class="recommendation-grid" id="recommendation-grid">
                <!-- Dynamic recommendation cards will be inserted here -->
            </div>
        </div>

        <button class="winner-cta" onclick="goToApp()">
            ÏßÄÍ∏à <img src="TVING_APP.webp" alt="TVING">ÏóêÏÑú ÌôïÏù∏ÌïòÍ∏∞
        </button>
    </div>

    <script>
        const contents = [
            { id: 1, title: "ÎààÎ¨ºÏùò Ïó¨Ïôï", genre: "romance", img: "poster/ÎààÎ¨ºÏùò Ïó¨Ïôï.webp" },
            { id: 2, title: "ÏÑ†Ïû¨ ÏóÖÍ≥† ÌäÄÏñ¥", genre: "romance", img: "poster/ÏÑ†Ïû¨ÏóÖÍ≥†ÌäÄÏñ¥.webp" },
            { id: 3, title: "ÌôòÏäπÏó∞Ïï†3", genre: "reality", img: "poster/ÌôòÏäπÏó∞Ïï†3.webp" },
            { id: 4, title: "ÌÅ¨ÎùºÏûÑÏî¨ Î¶¨ÌÑ¥Ï¶à", genre: "thriller", img: "poster/ÌÅ¨ÎùºÏûÑÏî¨ Î¶¨ÌÑ¥Ï¶à.webp" },
            { id: 5, title: "ÌîºÎùºÎØ∏Îìú Í≤åÏûÑ", genre: "thriller", img: "poster/ÌîºÎùºÎØ∏Îìú Í≤åÏûÑ.webp" },
            { id: 6, title: "LTNS", genre: "drama", img: "poster/LTNS.webp" },
            { id: 7, title: "Ïù¥Ïû¨, Í≥ß Ï£ΩÏäµÎãàÎã§", genre: "drama", img: "poster/Ïù¥Ïû¨, Í≥ß Ï£ΩÏäµÎãàÎã§.webp" },
            { id: 8, title: "Ïö¥Ïàò Ïò§ÏßÑ ÎÇ†", genre: "thriller", img: "poster/Ïö¥Ïàò Ïò§ÏßÑ ÎÇ†.webp" }
        ];

        // Curation-only items (for recommendations, not in tournament)
        const curationItems = [
            // Romance (6Í∞ú)
            { id: 101, title: "Ïñ¥Ï©åÎã§ Î∞úÍ≤¨Ìïú ÌïòÎ£®", genre: "romance", img: "poster/Ïñ¥Ï©åÎã§ Î∞úÍ≤¨Ìïú ÌïòÎ£®.webp" },
            { id: 102, title: "Ïö∞Î¶¨Îì§Ïùò Î∏îÎ£®Ïä§", genre: "romance", img: "poster/Ïö∞Î¶¨Îì§Ïùò Î∏îÎ£®Ïä§.webp" },
            { id: 103, title: "ÏÑ†Î∞∞, Í∑∏ Î¶ΩÏä§Ìã± Î∞îÎ•¥ÏßÄ ÎßàÏöî", genre: "romance", img: "poster/ÏÑ†Î∞∞, Í∑∏ Î¶ΩÏä§Ìã± Î∞îÎ•¥ÏßÄ ÎßàÏöî.webp" },
            { id: 104, title: "ÏùºÌÉÄ Ïä§Ï∫îÎì§", genre: "romance", img: "poster/ÏùºÌÉÄ Ïä§Ï∫îÎì§.webp" },
            { id: 105, title: "ÎπàÏÑºÏ°∞", genre: "romance", img: "poster/ÎπàÏÑºÏ°∞.webp" },
            { id: 106, title: "ÏûëÏùÄ ÏïÑÏî®Îì§", genre: "romance", img: "poster/ÏûëÏùÄ ÏïÑÏî®Îì§.webp" },

            // Thriller (6Í∞ú)
            { id: 107, title: "Î¨¥Ïù∏ÎèÑÏùò ÎîîÎ∞î", genre: "thriller", img: "poster/Î¨¥Ïù∏ÎèÑÏùò ÎîîÎ∞î.webp" },
            { id: 108, title: "ÎπÖÎßàÏö∞Ïä§", genre: "thriller", img: "poster/ÎπÖÎßàÏö∞Ïä§.webp" },
            { id: 109, title: "ÏïÖÍ∑Ä", genre: "thriller", img: "poster/ÏïÖÍ∑Ä.webp" },
            { id: 110, title: "Ïû¨Î≤åÏßë ÎßâÎÇ¥ÏïÑÎì§", genre: "thriller", img: "poster/Ïû¨Î≤åÏßë ÎßâÎÇ¥ÏïÑÎì§.webp" },
            { id: 111, title: "ÏäàÎ£π", genre: "thriller", img: "poster/ÏäàÎ£π.webp" },
            { id: 112, title: "ÌôòÌòº", genre: "thriller", img: "poster/ÌôòÌòº.webp" },

            // Drama (6Í∞ú)
            { id: 113, title: "ÎÇòÏùò Ìï¥Î∞©ÏùºÏßÄ", genre: "drama", img: "poster/ÎÇòÏùò Ìï¥Î∞©ÏùºÏßÄ.webp" },
            { id: 114, title: "Ïö∞Î¶¨Í∞Ä ÎÇ®Ïù¥Í∞Ä", genre: "drama", img: "poster/Ïö∞Î¶¨Í∞Ä ÎÇ®Ïù¥Í∞Ä.webp" },
            { id: 115, title: "Ïú†ÎØ∏Ïùò ÏÑ∏Ìè¨Îì§", genre: "drama", img: "poster/Ïú†ÎØ∏Ïùò ÏÑ∏Ìè¨Îì§.webp" },
            { id: 116, title: "ÎØ∏Ïä§ÌÑ∞ ÏÖòÏÉ§Ïù∏", genre: "drama", img: "poster/ÎØ∏Ïä§ÌÑ∞ ÏÖòÏÉ§Ïù∏.webp" },
            { id: 117, title: "Ïä¨Í∏∞Î°úÏö¥ Í∞êÎπµÏÉùÌôú", genre: "drama", img: "poster/Ïä¨Í∏∞Î°úÏö¥ Í∞êÎπµÏÉùÌôú.webp" },
            { id: 118, title: "Ïä§ÌÉÄÌä∏ÏóÖ", genre: "drama", img: "poster/Ïä§ÌÉÄÌä∏ÏóÖ.webp" },

            // Reality (6Í∞ú)
            { id: 119, title: "ÎÇòÎäî ÏÜîÎ°ú", genre: "reality", img: "poster/ÎÇòÎäî ÏÜîÎ°ú.webp" },
            { id: 120, title: "ÏÑúÏö∏Ï≤¥ÌÇπ", genre: "reality", img: "poster/ÏÑúÏö∏Ï≤¥ÌÇπ.webp" },
            { id: 121, title: "ÌôòÏäπÏó∞Ïï†2", genre: "reality", img: "poster/ÌôòÏäπÏó∞Ïï†2.webp" },
            { id: 122, title: "Ïã†ÏÑúÏú†Í∏∞", genre: "reality", img: "poster/Ïã†ÏÑúÏú†Í∏∞.webp" },
            { id: 123, title: "ÎÜÄÎùºÏö¥ ÌÜ†ÏöîÏùº", genre: "reality", img: "poster/ÎÜÄÎùºÏö¥ ÌÜ†ÏöîÏùº.webp" },
            { id: 124, title: "Î∞îÌÄ¥ Îã¨Î¶∞ Ïßë", genre: "reality", img: "poster/Î∞îÌÄ¥ Îã¨Î¶∞ Ïßë.webp" }
        ];

        // Combined list for recommendations
        const allContent = [...contents, ...curationItems];

        let currentRound = [], nextRound = [], currentIndex = 0, isAnimating = false;
        let gameStarted = false;

        function startGame() {
            // Hide opening screen
            document.getElementById('opening-screen').style.display = 'none';

            // Hide arena elements during battle text animation
            document.querySelector('.arena').style.display = 'none';
            document.querySelector('.vs-container').style.display = 'none';
            document.querySelector('.header').style.display = 'none';

            // Show background overlay
            const overlay = document.getElementById('battle-overlay');
            overlay.classList.add('battle-overlay-active');

            // Show and animate battle text
            const battleText = document.getElementById('battle-text');
            battleText.classList.add('battle-fly-animation');

            // Start game after animation completes
            setTimeout(() => {
                overlay.classList.remove('battle-overlay-active');

                // Show arena elements
                document.querySelector('.arena').style.display = 'flex';
                document.querySelector('.vs-container').style.display = 'flex';
                document.querySelector('.header').style.display = 'block';

                gameStarted = true;
                initGame();
            }, 2500);
        }

        function initGame() {
            currentRound = [...contents].sort(() => Math.random() - 0.5);
            nextRound = [];
            currentIndex = 0;
            renderRound();
        }

        function renderRound() {
            // Korean round names
            let roundName;
            switch (currentRound.length) {
                case 2: roundName = "Í≤∞Ïäπ"; break;
                case 4: roundName = "Ï§ÄÍ≤∞Ïäπ"; break;
                case 8: roundName = "8Í∞ïÏ†Ñ"; break;
                default: roundName = `${currentRound.length}Í∞ïÏ†Ñ`;
            }

            // Add progress indicator
            const totalMatches = currentRound.length / 2;
            const currentMatch = Math.floor(currentIndex / 2) + 1;
            const progressText = `${roundName} (${currentMatch}/${totalMatches})`;

            document.getElementById('round-badge').innerText = progressText;

            updateCard('a', currentRound[currentIndex]);
            updateCard('b', currentRound[currentIndex + 1]);

            // Reset states
            document.querySelectorAll('.card').forEach(c => {
                c.classList.remove('winner', 'loser');
            });

            // Show VS again
            document.querySelector('.vs-container').classList.remove('hidden');
        }

        function updateCard(side, item) {
            const img = document.getElementById(`img-${side}`);
            const reflect = document.getElementById(`reflect-${side}`);
            const title = document.getElementById(`title-${side}`);

            img.src = item.img;
            reflect.src = item.img;
            title.innerText = item.title;
        }

        function selectCard(selectedSide) {
            if (isAnimating) return;
            isAnimating = true;

            const winnerIndex = selectedSide === 'a' ? currentIndex : currentIndex + 1;
            const loserSide = selectedSide === 'a' ? 'b' : 'a';

            nextRound.push(currentRound[winnerIndex]);

            // Hide VS during selection
            document.querySelector('.vs-container').classList.add('hidden');

            // Final match special effects
            const isFinalMatch = currentRound.length === 2;
            if (isFinalMatch) {
                document.body.classList.add('shake');
                setTimeout(() => document.body.classList.remove('shake'), 500);
                triggerConfetti(); // Confetti instead of lightning
            } else {
                triggerLightning();
            }

            // Animate
            document.getElementById(`card-${selectedSide}`).classList.add('winner');
            document.getElementById(`card-${loserSide}`).classList.add('loser');

            setTimeout(() => {
                currentIndex += 2;
                if (currentIndex >= currentRound.length) {
                    if (nextRound.length === 1) {
                        // Extended delay for champion reveal
                        setTimeout(() => showWinner(nextRound[0]), 800);
                        return;
                    }
                    currentRound = [...nextRound];
                    nextRound = [];
                    currentIndex = 0;
                }
                renderRound();
                isAnimating = false;
            }, 1200); // Extended from 800ms to 1200ms
        }

        function showWinner(item) {
            // Hide arena elements
            document.querySelector('.arena').style.display = 'none';
            document.querySelector('.vs-container').style.display = 'none';
            document.querySelector('.header').style.display = 'none';

            document.getElementById('winner-screen').style.display = 'flex';
            document.getElementById('winner-img').src = item.img;
            document.getElementById('winner-name').innerText = item.title;

            // Enhanced TYPE badges based on genre
            const typeNames = {
                'romance': 'üíñ Í∞êÏÑ± Î°úÎß®Ìã∞Ïä§Ìä∏',
                'thriller': '‚ö° Ïä§Î¶¥ ÌóåÌÑ∞',
                'drama': 'üé≠ Í∞êÎèô Ïª¨Î†âÌÑ∞',
                'reality': 'üé¨ Î¶¨ÏñºÎ¶¨Ìã∞ Îü¨Î≤Ñ'
            };

            document.getElementById('winner-type').innerText = typeNames[item.genre] || 'üåü ÏΩòÌÖêÏ∏† ÎßàÎãàÏïÑ';

            // Show recommendations from same genre (up to 6)
            const recommendations = allContent.filter(c =>
                c.genre === item.genre && c.id !== item.id
            ).slice(0, 6);

            const recommendGrid = document.getElementById('recommendation-grid');
            recommendGrid.innerHTML = '';

            recommendations.forEach(rec => {
                const card = document.createElement('div');
                card.className = 'recommend-card';
                card.onclick = () => goToApp();

                const img = document.createElement('img');
                img.src = rec.img;
                img.alt = rec.title;

                card.appendChild(img);
                recommendGrid.appendChild(card);
            });
        }

        function goToApp() {
            window.location.href = "https://www.tving.com";
        }

        function triggerConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const particles = [];
            const colors = ['#FFD700', '#FFA500', '#FF69B4', '#87CEEB', '#98FB98'];

            // Create particles
            for (let i = 0; i < 150; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: -20,
                    vx: (Math.random() - 0.5) * 4,
                    vy: Math.random() * 3 + 2,
                    rotation: Math.random() * 360,
                    rotationSpeed: (Math.random() - 0.5) * 10,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 8 + 4
                });
            }

            let animationFrame = 0;
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                particles.forEach((p, index) => {
                    // Update position
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy += 0.1; // Gravity
                    p.rotation += p.rotationSpeed;

                    // Draw confetti
                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate((p.rotation * Math.PI) / 180);
                    ctx.fillStyle = p.color;
                    ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size * 1.5);
                    ctx.restore();

                    // Remove particles that are off screen
                    if (p.y > canvas.height + 50) {
                        particles.splice(index, 1);
                    }
                });

                animationFrame++;
                if (particles.length > 0 && animationFrame < 300) {
                    requestAnimationFrame(animate);
                } else {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            }
            animate();
        }

        function triggerLightning() {
            const canvas = document.getElementById('lightning-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            ctx.shadowBlur = 30;
            ctx.shadowColor = '#fff';
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 4;

            let frames = 0;
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                if (frames > 8) return;

                if (Math.random() > 0.5) {
                    ctx.beginPath();
                    ctx.moveTo(canvas.width / 2, canvas.height / 2);
                    for (let i = 0; i < 6; i++) {
                        ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);
                        ctx.moveTo(canvas.width / 2, canvas.height / 2);
                    }
                    ctx.stroke();
                }
                frames++;
                requestAnimationFrame(draw);
            }
            draw();
        }

        // Game will start when user clicks "ÏßÄÍ∏à ÏãúÏûëÌïòÍ∏∞" button
    </script>
</body>

</html>